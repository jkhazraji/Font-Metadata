<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script type="text/javascript" src="./index.js"></script>
    <!-- <script src="https://cdn.jsdelivr.net/npm/fontname@1.0.1/dist/fontname.min.js"></script> -->

    <title>Document</title>
</head>
<body>
   <input type="file" id="fontFile" accept=".ttf,.otf">
<pre id="output"></pre>

<script>
  const input = document.getElementById("fontFile");
  const output = document.getElementById("output");

  input.addEventListener("change", (e) => {
    const file = e.target.files[0];
    if (!file) return;

    const reader = new FileReader();
    reader.onload = (ev) => {
      const arrayBuffer = ev.target.result;

      try {
        const fontData = FontName.parse(arrayBuffer); // returns array of fonts for TTC, or one for TTF/OTF
        output.textContent = JSON.stringify(fontData, null, 2);
        b4a.CallSub("getFontMeta", true, output.textContent);
      } catch (err) {
        output.textContent = "Error parsing font: " + err;
        b4a.CallSub("getFontMetaError", true, "Error parsing font: " + err);
      }
    };

    reader.readAsArrayBuffer(file);
  });
</script>

</body>
</html>